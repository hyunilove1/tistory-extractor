<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê´€ë¦¬ - í‚¤ì›Œë“œ ìŠ¤ìºë„ˆ</title>
    <style>
        /* (ìŠ¤íƒ€ì¼ì€ 7ë‹¨ê³„ì™€ ê±°ì˜ ë™ì¼) */
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; padding: 20px; background-color: #f4f7f6; }
        h1 { color: #333; }
        h2 { color: #444; border-bottom: 1px dashed #ccc; padding-bottom: 5px; margin-top: 30px; }
        .container { 
            width: 90%; 
            max-width: 1400px; 
            margin: 0 auto; background-color: #fff; padding: 20px 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); 
        }
        
        nav { 
            background: #eee; 
            padding: 15px; 
            border-radius: 5px; 
            margin-bottom: 20px; 
        }
        nav a { 
            font-weight: bold; 
            margin-right: 25px; 
            text-decoration: none; 
            color: #555;
            font-size: 1.1em;
        }
        nav a.active { color: #007bff; }
        nav a:hover { text-decoration: underline; }

        /* --- ê´€ë¦¬ ì„¹ì…˜ ìŠ¤íƒ€ì¼ (ë™ì¼) --- */
        .management-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .form-section input[type="text"] { width: 95%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 10px; }
        .btn { padding: 10px 15px; background-color: #5d9cec; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 1em; }
        .btn-delete { background: none; border: none; color: #dc3545; cursor: pointer; font-size: 0.9em; font-weight: bold; }
        
        .list-section ul { list-style: none; padding: 0; }
        .list-section li { background-color: #f9f9f9; padding: 10px; border: 1px solid #eee; border-radius: 4px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center; }
        .list-section li .name { font-weight: bold; }
        .list-section li .url { font-size: 0.9em; color: #777; margin-left: 10px; }


        /* --- 7/9ë‹¨ê³„: ëŒ€ì‹œë³´ë“œ ìŠ¤íƒ€ì¼ --- */
        .dashboard {
            background-color: #eef7ff; /* íŒŒë€ìƒ‰ ê³„ì—´ */
            border: 1px solid #b8d9f8;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px; 
        }
        .dashboard h3 { margin-top: 0; }
        .dashboard ul { list-style: none; padding: 0; }
        .dashboard li { 
            font-size: 1.2em; 
            padding: 8px 0; 
            border-bottom: 1px solid #dcebfa;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .dashboard li:last-child { border-bottom: none; }
        .dashboard .stat-keyword { font-weight: bold; color: #0056b3; }
        .dashboard .stat-count { font-weight: bold; font-size: 1.1em; background-color: #fff; padding: 3px 10px; border-radius: 5px;}
        .dashboard .no-stats { color: #777; }
        
        /* --- 9ë‹¨ê³„: ë¸”ë¡œê·¸ ë­í‚¹ ëŒ€ì‹œë³´ë“œ (ì´ˆë¡ìƒ‰ ê³„ì—´) --- */
        .dashboard-blog {
            background-color: #e6f7f0; /* ì´ˆë¡ìƒ‰ ê³„ì—´ */
            border: 1px solid #c3e6cb;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        .dashboard-blog h3 { margin-top: 0; }
        .dashboard-blog ul { list-style: none; padding: 0; }
        .dashboard-blog li { 
            font-size: 1.2em; 
            padding: 8px 0; 
            border-bottom: 1px solid #d4f0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .dashboard-blog li:last-child { border-bottom: none; }
        .dashboard-blog .stat-keyword { font-weight: bold; color: #155724; } /* CSS í´ë˜ìŠ¤ëª… ì¬í™œìš© */
        .dashboard-blog .stat-count { font-weight: bold; font-size: 1.1em; background-color: #fff; padding: 3px 10px; border-radius: 5px;}
        .dashboard-blog .no-stats { color: #777; }

    </style>
</head><body>
    <div class="container">
        <nav>
            <a href="/">ğŸš€ ìŠ¤ìº” ê²°ê³¼ ë³´ê¸°</a>
            <a href="/manage" class="active">âš™ï¸ ë¸”ë¡œê·¸/í‚¤ì›Œë“œ ê´€ë¦¬</a>
        </nav>

        <h1>ğŸš€ ì´ˆê³ ì† í‚¤ì›Œë“œ ìŠ¤ìºë„ˆ</h1>

        <h2>ğŸ“Š í‚¤ì›Œë“œ ë¹ˆë„ìˆ˜ (ì˜¤ëŠ˜)</h2>
        <div class="dashboard">
            <ul>
                {% for stat in stats %}
                <li>
                    <span class="stat-keyword">{{ stat.keyword_found }}</span>
                    <span class="stat-count">{{ stat.count }} íšŒ</span>
                </li>
                {% else %}
                <li class="no-stats">ì˜¤ëŠ˜ ë°œê²¬ëœ í‚¤ì›Œë“œ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</li>
                {% endfor %}
            </ul>
        </div>
        
        <h2>ğŸ† ë¸”ë¡œê·¸ë³„ ë­í‚¹ (ì˜¤ëŠ˜)</h2>
        <div class="dashboard-blog"> <ul>
                {% for stat in blog_stats %}
                <li>
                    <span class="stat-keyword">{{ stat.blog_name }}</span>
                    <span class="stat-count">{{ stat.count }} íšŒ</span>
                </li>
                {% else %}
                <li class="no-stats">ì˜¤ëŠ˜ ë­í‚¹ì— ì§‘ê³„ëœ ë¸”ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.</li>
                {% endfor %}
            </ul>
        </div>


        <h2>âš™ï¸ ë¸”ë¡œê·¸ / í‚¤ì›Œë“œ ê´€ë¦¬</h2>
        <div class="management-grid">
            <div class="form-section">
                <h3>ë¸”ë¡œê·¸ ê´€ë¦¬</h3>
                <form action="/add_blog" method="POST">
                    <input type="text" name="blog_name" placeholder="ë¸”ë¡œê·¸ ì´ë¦„ (ì˜ˆ: ê³ ë‹ˆ)" required>
                    <input type="text" name="rss_url" placeholder="RSS ì£¼ì†Œ (ì˜ˆ: https://.../rss)" required>
                    <button type="submit" class="btn">ë¸”ë¡œê·¸ ì¶”ê°€</button>
                </form>
                <div class="list-section">
                    <h4>ë“±ë¡ëœ ë¸”ë¡œê·¸</h4>
                    <ul>
                        {% for blog in blogs %}
                        <li>
                            <div>
                                <span class="name">{{ blog.name }}</span>
                                <span class="url">{{ blog.url }}</span> </div>
                            <form action="/delete_blog" method="POST" style="margin: 0;">
                                <input type="hidden" name="blog_id" value="{{ blog.id }}">
                                <button type="submit" class="btn-delete">ì‚­ì œ</button>
                            </form>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
            <div class="form-section">
                <h3>í‚¤ì›Œë“œ ê´€ë¦¬</h3>
                <form action="/add_keyword" method="POST">
                    <input type="text" name="keyword" placeholder="ìƒˆ í‚¤ì›Œë“œ (ì˜ˆ: íŒŒì´ì¬)" required>
                    <button type="submit" class="btn">í‚¤ì›Œë“œ ì¶”ê°€</button>
                </form>
                <div class="list-section">
                    <h4>ë“±ë¡ëœ í‚¤ì›Œë“œ</h4>
                    <ul>
                        {% for kw in keywords %}
                        <li>
                            <span class="name">{{ kw.word }}</span>
                            <form action="/delete_keyword" method="POST" style="margin: 0;">
                                <input type="hidden" name="keyword_id" value="{{ kw.id }}">
                                <button type="submit" class="btn-delete">ì‚­ì œ</button>
                            </form>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>

    </div>
</body>
</html>